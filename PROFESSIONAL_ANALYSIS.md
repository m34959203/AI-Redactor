# Комплексный профессиональный анализ проекта AI-Redactor

**Дата анализа:** 22 декабря 2025
**Проект:** AI-Redactor — система автоматизации сборки научного журнала
**Анализ выполнен с позиций:** Product Owner, Fullstack Developer, UX/UI Engineer, AI Engineer, Prompt Engineer

---

## Оглавление

1. [Product Owner — Бизнес-анализ](#1-product-owner--бизнес-анализ)
2. [Fullstack Developer — Технический анализ](#2-fullstack-developer--технический-анализ)
3. [UX/UI Engineer — Анализ пользовательского опыта](#3-uxui-engineer--анализ-пользовательского-опыта)
4. [AI Engineer — Анализ AI-интеграции](#4-ai-engineer--анализ-ai-интеграции)
5. [Prompt Engineer — Анализ промптов](#5-prompt-engineer--анализ-промптов)
6. [Сводная таблица рекомендаций](#6-сводная-таблица-рекомендаций)
7. [Roadmap развития](#7-roadmap-развития)

---

## 1. Product Owner — Бизнес-анализ

### 1.1 Описание продукта

**AI-Redactor** — веб-приложение для автоматизации процесса подготовки научного журнала. Развёрнуто по адресу [airesume.zhezu.kz](https://airesume.zhezu.kz) — субдомен Жезказганского университета имени О.А. Байконурова. Целевая аудитория: редакции научных журналов, издательства академических публикаций.

### 1.2 Ценностное предложение (Value Proposition)

| Проблема | Решение | Ценность |
|----------|---------|----------|
| Ручная классификация статей по разделам занимает часы | AI автоматически определяет раздел с точностью 80%+ | Экономия 2-4 часа на выпуск |
| Проверка орфографии — рутина | Автоматическая проверка на 3 языках | Снижение ошибок на 90% |
| Рецензирование субъективно | AI генерирует объективные оценки по 5 критериям | Стандартизация качества |
| Сборка PDF — технически сложная | Автоматическая генерация с оглавлением и нумерацией | Сборка за минуты вместо часов |

### 1.3 Реализованные функции (Features)

| Feature | Статус | Готовность |
|---------|--------|------------|
| Загрузка DOCX статей (drag-drop) | ✅ Реализовано | 100% |
| AI извлечение метаданных (название, автор) | ✅ Реализовано | 100% |
| AI классификация по разделам журнала | ✅ Реализовано | 100% |
| Ручное редактирование метаданных | ✅ Реализовано | 100% |
| Автоматическая сортировка (раздел + язык) | ✅ Реализовано | 100% |
| Проверка орфографии (RU/KZ/EN) | ✅ Реализовано | 100% |
| Генерация рецензий (5 критериев) | ✅ Реализовано | 100% |
| Генерация PDF с оформлением | ✅ Реализовано | 100% |
| Архив выпусков | ✅ Реализовано | 100% |
| Онбординг для новых пользователей | ✅ Реализовано | 100% |
| Мультиязычность интерфейса | ❌ Не реализовано | 0% |
| Аутентификация пользователей | ❌ Не реализовано | 0% |
| Совместная работа | ❌ Не реализовано | 0% |

### 1.4 Бизнес-метрики (KPIs)

**Текущие возможности мониторинга:**
- Количество загруженных статей
- Процент успешной классификации
- Количество сгенерированных выпусков в архиве
- Ошибки орфографии найдены/исправлены

**Рекомендуемые KPIs для добавления:**
- Time-to-publish (время от загрузки до PDF)
- AI accuracy rate (ручные исправления классификации)
- User engagement (сессии, возврат пользователей)
- Cost per article (расход токенов AI на статью)

### 1.5 Конкурентный анализ

| Критерий | AI-Redactor | MS Word + ручная работа | Open Journal Systems |
|----------|-------------|------------------------|---------------------|
| AI классификация | ✅ Автоматическая | ❌ Ручная | ❌ Ручная |
| Проверка орфографии | ✅ RU/KZ/EN | ⚠️ Только EN хорошо | ❌ Нет |
| Генерация PDF | ✅ Автоматическая | ⚠️ Ручная | ⚠️ Ограниченная |
| Рецензирование | ✅ AI + экспорт | ❌ Нет | ⚠️ Ручное |
| Стоимость | Бесплатно (OpenRouter free) | Лицензия MS | Бесплатно |
| Мультиязычность | ✅ RU/KZ/EN | ⚠️ Ограничено | ✅ 50+ языков |

### 1.6 Риски

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| OpenRouter изменит free tier лимиты | Средняя | Высокое | Добавить поддержку локальных моделей (Ollama) |
| Ошибки AI классификации | Низкая | Среднее | Реализована ручная переклассификация |
| Потеря данных (браузерное хранилище) | Низкая | Высокое | Добавить export/import функционал |
| LibreOffice недоступен на сервере | Низкая | Критическое | Fallback на клиентскую генерацию PDF |

### 1.7 Рекомендации Product Owner

1. **MVP достигнут** — все основные функции реализованы и работают
2. **Следующий приоритет** — аутентификация и облачное хранение для B2B модели
3. **Монетизация** — SaaS модель с тарифами по количеству статей/месяц
4. **Локализация** — добавить EN интерфейс для международного рынка

---

## 2. Fullstack Developer — Технический анализ

### 2.1 Архитектура системы

```
┌─────────────────────────────────────────────────────────────┐
│                        FRONTEND                              │
│  React 18 + Vite + Tailwind CSS                             │
│  ┌─────────────┬─────────────┬─────────────┬─────────────┐  │
│  │ App.jsx     │ Components/ │ Services/   │ Utils/      │  │
│  │ (главный)   │ (UI+модули) │ (aiApi.js)  │ (утилиты)   │  │
│  └─────────────┴─────────────┴─────────────┴─────────────┘  │
│                           │                                  │
│                    AppContext (State)                        │
└────────────────────────────┬────────────────────────────────┘
                             │ REST API
┌────────────────────────────┼────────────────────────────────┐
│                        BACKEND                               │
│  Node.js + Express.js                                       │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ /api/health     │ /api/convert │ /api/generate-journal ││
│  └─────────────────────────────────────────────────────────┘│
│                           │                                  │
│              LibreOffice + pdf-lib                          │
└─────────────────────────────────────────────────────────────┘
                             │
┌────────────────────────────┼────────────────────────────────┐
│                    EXTERNAL SERVICES                         │
│  ┌─────────────────────────────────────────────────────────┐│
│  │ OpenRouter API (AI)  │  IndexedDB (архив)  │ localStorage│
│  └─────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────┘
```

### 2.2 Технологический стек

| Слой | Технология | Версия | Обоснование |
|------|-----------|--------|-------------|
| **Frontend Framework** | React | 18.3.1 | Экосистема, hooks, Context API |
| **Build Tool** | Vite | 5.4.11 | Быстрая HMR, ESM native |
| **Styling** | Tailwind CSS | 3.4.15 | Utility-first, малый bundle |
| **Icons** | Lucide React | 0.462.0 | Легкие SVG иконки |
| **DOCX Parsing** | Mammoth.js | 1.11.0 | Чистый HTML из DOCX |
| **PDF (клиент)** | jsPDF | 3.0.4 | Fallback генерация |
| **Backend** | Express.js | 4.18.2 | Простой REST API |
| **PDF (сервер)** | pdf-lib | 1.17.1 | Манипуляция PDF |
| **Конвертация** | LibreOffice | headless | Точная DOCX→PDF конвертация |
| **Контейнеризация** | Docker | slim images | Railway/Vercel deployment |

### 2.3 Структура кода

```
src/
├── App.jsx                 # 642 строки — слишком большой, требует рефакторинга
├── components/
│   ├── Editor/            # 4 компонента — хорошо структурировано
│   ├── SpellCheck/        # 1 компонент
│   ├── Review/            # 1 компонент
│   ├── Archive/           # 1 компонент
│   ├── Info/              # 1 компонент
│   └── UI/                # 7 общих компонентов
├── context/
│   └── AppContext.jsx     # 362 строки — state management
├── services/
│   └── aiApi.js           # 963 строки — AI интеграция (требует разделения)
└── utils/
    ├── apiService.js      # Backend API клиент
    ├── docxConverter.js   # DOCX парсинг
    ├── pdfGenerator.js    # PDF генерация
    └── ...                # Остальные утилиты

server/
├── index.js               # 1148 строк — монолитный, требует рефакторинга
└── Dockerfile
```

### 2.4 Качество кода

| Метрика | Оценка | Комментарий |
|---------|--------|-------------|
| **Модульность** | ⚠️ 6/10 | App.jsx и server/index.js слишком большие |
| **Type Safety** | ❌ 3/10 | Нет TypeScript, нет PropTypes |
| **Тестирование** | ❌ 0/10 | Нет тестов (критическая проблема) |
| **Error Handling** | ✅ 8/10 | ErrorBoundary, try-catch, fallbacks |
| **State Management** | ✅ 8/10 | Context + useReducer хорошо структурирован |
| **Code Splitting** | ✅ 7/10 | Vite chunks для react-vendor, icons |
| **Security** | ⚠️ 5/10 | API ключ на клиенте (риск) |

### 2.5 Технический долг

| Проблема | Приоритет | Решение |
|----------|-----------|---------|
| App.jsx 642 строки | Высокий | Выделить логику в custom hooks |
| aiApi.js 963 строки | Высокий | Разделить на модули (metadata, spelling, review) |
| server/index.js 1148 строк | Средний | Разделить на routes, controllers, services |
| Отсутствие TypeScript | Средний | Постепенная миграция с JSDoc |
| Нет тестов | Критический | Добавить Jest + React Testing Library |
| API ключ на клиенте | Высокий | Проксировать через backend |

### 2.6 Performance

**Сильные стороны:**
- Code splitting (react-vendor, icons chunks)
- Lazy rate limiting (5s между AI запросами)
- IndexedDB для больших PDF файлов
- Fallback модели при недоступности

**Проблемы:**
- Нет lazy loading компонентов (React.lazy)
- Нет виртуализации списка статей (проблема при 50+ статьях)
- PDF генерируется синхронно (блокирует UI)

### 2.7 Рекомендации Fullstack Developer

```javascript
// 1. Миграция на TypeScript (постепенно)
// tsconfig.json + JSDoc аннотации

// 2. Рефакторинг App.jsx в hooks
// src/hooks/useArticleUpload.ts
// src/hooks/useSpellCheck.ts
// src/hooks/usePdfGeneration.ts

// 3. Добавить React.lazy для вкладок
const EditorTab = React.lazy(() => import('./components/Editor/EditorTab'));
const ReviewTab = React.lazy(() => import('./components/Review/ReviewTab'));

// 4. Proxy API ключа через backend
// server/routes/ai.js
app.post('/api/ai/classify', async (req, res) => {
  const { content, title } = req.body;
  const result = await openrouterService.classify(content, title);
  res.json(result);
});

// 5. Добавить тесты
// src/__tests__/aiApi.test.ts
describe('extractMetadataWithAI', () => {
  it('should extract title and author from article', async () => {
    const result = await extractMetadataWithAI('test.docx', 'ARTICLE TITLE\nAuthor A.B.');
    expect(result.title).toBe('Article Title');
    expect(result.author).toBe('Author A.B.');
  });
});
```

---

## 3. UX/UI Engineer — Анализ пользовательского опыта

### 3.1 Информационная архитектура

```
┌─────────────────────────────────────────────────────────────┐
│                         HEADER                               │
│  [Logo] AI Journal Editor         [Счетчик статей: 15]      │
├─────────────────────────────────────────────────────────────┤
│  TABS: [Редактор] [Орфография] [Рецензия] [Архив] [О журнале]│
├─────────────────────────────────────────────────────────────┤
│                                                              │
│                     CONTENT AREA                             │
│  ┌─────────────────────────────────────────────────────────┐│
│  │  Tab-specific content                                   ││
│  │  (Editor / SpellCheck / Review / Archive / Info)        ││
│  └─────────────────────────────────────────────────────────┘│
│                                                              │
├─────────────────────────────────────────────────────────────┤
│  TOAST NOTIFICATIONS (bottom-right, slide-in)               │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 User Flow Analysis

**Основной сценарий (Happy Path):**
```
1. Первый запуск → Onboarding (5 шагов) → Понимание интерфейса ✅
2. Загрузка спецстраниц (титул, описание, финал) → Drag-drop ✅
3. Загрузка статей → Автоматический AI анализ → Прогресс-бар ✅
4. Редактирование метаданных → Inline editing ✅
5. Проверка орфографии → Исправление ✅
6. Генерация PDF → Скачивание → Архивация ✅
```

**Оценка user flow:** 8/10 — логичный, интуитивный процесс

### 3.3 Дизайн-система

**Цветовая палитра:**
| Цвет | Использование | Hex |
|------|---------------|-----|
| Primary (Indigo) | Кнопки, активные элементы | #4F46E5 |
| Success (Green) | Успешные операции | #22C55E |
| Error (Red) | Ошибки, удаление | #EF4444 |
| Warning (Orange) | Предупреждения | #F97316 |
| Neutral (Gray) | Фоны, границы | #6B7280 |

**Типографика:**
- Font-family: System stack (-apple-system, BlinkMacSystemFont...)
- Размеры: text-sm (14px), text-base (16px), text-lg (18px), text-xl (20px)

**Компоненты:**
| Компонент | Состояния | A11y |
|-----------|-----------|------|
| Button | default, hover, active, disabled | ⚠️ Нет focus ring |
| Input | default, focus, error | ✅ focus:ring-2 |
| Card | default, hover | ✅ Хороший контраст |
| Toast | success, error, warning, info | ✅ role="alert" |
| Modal | open, closed | ⚠️ Нет focus trap |

### 3.4 Responsive Design

| Breakpoint | Поведение |
|------------|-----------|
| Mobile (<640px) | Одна колонка, полная ширина |
| Tablet (768px) | 2 колонки для grid-элементов |
| Desktop (1024px+) | 3 колонки, max-width: 1280px |

**Оценка:** 7/10 — хорошая адаптивность, но кнопки мелкие на мобильных

### 3.5 Accessibility (WCAG 2.1)

| Критерий | Статус | Проблема |
|----------|--------|----------|
| **1.1 Alt text** | ⚠️ | Иконки lucide без aria-label |
| **1.4 Contrast** | ✅ | 7:1+ для текста |
| **2.1 Keyboard** | ✅ | Tab навигация работает |
| **2.4 Focus** | ⚠️ | Модальные окна без focus trap |
| **3.1 Language** | ⚠️ | lang="ru" не установлен |
| **4.1 ARIA** | ⚠️ | Минимум aria-атрибутов |

**Оценка A11y:** 5/10 — требует доработки

### 3.6 Usability Issues

| Проблема | Серьёзность | Решение |
|----------|-------------|---------|
| Нет индикации обязательных полей | Средняя | Добавить * для required |
| Нет подтверждения удаления статьи | Высокая | Добавить confirm dialog |
| Долгое ожидание AI без cancel | Средняя | Добавить кнопку отмены |
| Не видно прогресс загрузки файла | Низкая | Добавить progress bar при upload |
| Таблица статей не скроллится | Средняя | Добавить virtualized list при 20+ |

### 3.7 Рекомендации UX/UI Engineer

**Немедленные улучшения:**
1. Добавить confirm dialog при удалении
2. Увеличить touch target для мобильных (min 44px)
3. Добавить aria-label ко всем иконкам
4. Добавить focus trap в модальные окна
5. Установить lang="ru" на html элемент

**Дизайн-улучшения:**
1. Dark mode (используя Tailwind dark:)
2. Skeleton loaders вместо spinner
3. Анимации переходов между вкладками
4. Микро-взаимодействия на hover

**Figma Design System (рекомендация):**
```
Components/
├── Buttons (Primary, Secondary, Ghost, Danger)
├── Inputs (Text, Select, File Upload)
├── Cards (Article, Archive Issue, Review)
├── Modals (Loading, Confirm, Onboarding)
├── Alerts (Info, Success, Warning, Error)
└── Navigation (Tabs, Header)
```

---

## 4. AI Engineer — Анализ AI-интеграции

### 4.1 Текущая архитектура AI

```
┌─────────────────────────────────────────────────────────────┐
│                      FRONTEND                                │
│  aiApi.js (963 строки)                                      │
│  ┌───────────────────────────────────────────────────────┐  │
│  │ extractMetadataWithAI()  │ detectArticleSection()     │  │
│  │ checkSpelling()          │ reviewArticle()            │  │
│  │ retryArticleClassification() │ batchRetryClassification()│
│  └───────────────────────────────────────────────────────┘  │
└────────────────────────────┬────────────────────────────────┘
                             │ HTTPS
┌────────────────────────────┼────────────────────────────────┐
│                    OpenRouter API                            │
│  Model: google/gemma-3-27b-it:free                          │
│  Fallbacks: qwen3-32b, llama-3.3-70b, gemma-3-12b           │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 Модели и их характеристики

| Модель | Параметры | Контекст | Назначение | Ограничения |
|--------|-----------|----------|------------|-------------|
| gemma-3-27b-it | 27B | 8K | Основная модель | 20 req/min free |
| qwen3-32b | 32B | 128K | Fallback #1 | — |
| llama-3.3-70b | 70B | 128K | Fallback #2 | — |
| gemma-3-12b | 12B | 128K | Fallback #3 | — |

### 4.3 AI Pipeline

```
Загрузка файла
      │
      ▼
┌─────────────────┐     ┌─────────────────┐
│ Mammoth.js      │────▶│ extractMetadata │─────┐
│ DOCX → Text     │     │ (600 tokens)    │     │
└─────────────────┘     └─────────────────┘     │
                                                 │
      ┌──────────────────────────────────────────┘
      │
      ▼
┌─────────────────┐     ┌─────────────────┐
│ detectSection   │────▶│ checkSpelling   │
│ (500 tokens)    │     │ (2000 tokens)   │
└─────────────────┘     └─────────────────┘
      │                         │
      │                         │
      ▼                         ▼
┌─────────────────────────────────────────┐
│          State Update                    │
│  { title, author, section, errors }     │
└─────────────────────────────────────────┘
```

### 4.4 Метрики AI производительности

| Метрика | Текущее значение | Целевое |
|---------|------------------|---------|
| Classification Accuracy | ~80% (оценка) | 90% |
| Tokens per Article | ~4100 | <3000 |
| Latency (avg) | ~3-5s per request | <2s |
| Fallback Rate | ~5% | <1% |

### 4.5 Проблемы AI-интеграции

| Проблема | Влияние | Решение |
|----------|---------|---------|
| API ключ хранится на клиенте | Безопасность | Proxy через backend |
| Нет кэширования результатов | Лимиты, скорость | Redis/LocalStorage кэш |
| JSON парсинг ненадёжен | Ошибки | Structured outputs (если поддерживается) |
| Нет мониторинга токенов | Неожиданные лимиты | Dashboard с метриками |
| Одна модель для всех задач | Неоптимально | Разные модели для разных задач |

### 4.6 Рекомендации AI Engineer

**1. Оптимизация токенов:**
```javascript
// Текущее: 2500 символов контента + промпт
// Рекомендация: semantic chunking
const getOptimalChunk = (content, taskType) => {
  const limits = {
    metadata: 1500,    // Название и автор в начале
    section: 2000,     // Ключевые слова распределены
    spelling: 3000,    // Нужен контекст
    review: 4000       // Полный анализ
  };
  return content.substring(0, limits[taskType]);
};
```

**2. Мульти-модельная стратегия:**
```javascript
const MODEL_ROUTING = {
  metadata: 'gemma-3-12b',      // Простая задача, быстрая модель
  section: 'gemma-3-27b',       // Требует понимания контекста
  spelling: 'qwen3-32b',        // Хорош для многоязычного
  review: 'llama-3.3-70b'       // Сложный анализ
};
```

**3. Кэширование:**
```javascript
// Кэш на уровне content hash
const getCachedResult = async (content, taskType) => {
  const hash = await crypto.subtle.digest('SHA-256', content);
  const key = `${taskType}:${hashToHex(hash)}`;
  return localStorage.getItem(key);
};
```

**4. Локальные модели (Ollama):**
```javascript
// Fallback на локальную модель при исчерпании лимитов
const OLLAMA_ENDPOINT = 'http://localhost:11434/api/generate';
const useLocalModel = async (prompt) => {
  return fetch(OLLAMA_ENDPOINT, {
    method: 'POST',
    body: JSON.stringify({ model: 'gemma2:9b', prompt })
  });
};
```

---

## 5. Prompt Engineer — Анализ промптов

### 5.1 Инвентаризация промптов

| Промпт | Функция | Токены | Качество |
|--------|---------|--------|----------|
| System Prompt | Все запросы | ~100 | ✅ Хорошо |
| Metadata Extraction | extractMetadataWithAI | ~400 | ✅ Хорошо |
| Section Classification | detectArticleSection | ~600 | ⚠️ Можно улучшить |
| Spelling Check | checkSpelling | ~500 | ⚠️ Требует доработки |
| Review Generation | reviewArticle | ~700 | ✅ Хорошо |
| Retry Classification | retryArticleClassification | ~800 | ✅ Хорошо |

### 5.2 Анализ System Prompt

**Текущий:**
```
Ты - эксперт-классификатор научных публикаций для академического журнала.
Ты анализируешь научные статьи на русском, английском и казахском языках.
Всегда отвечай ТОЛЬКО в формате JSON без дополнительного текста.
Не добавляй пояснения до или после JSON.
При классификации учитывай методологию, объект исследования и ключевые термины.
```

**Оценка:** 7/10 — Хороший, но можно добавить контекст

**Улучшенная версия:**
```
Ты - эксперт-редактор научного журнала с 20-летним опытом.
Специализация: анализ и классификация академических публикаций.

ТВОИ КОМПЕТЕНЦИИ:
- Классификация статей по научным дисциплинам
- Извлечение метаданных из научных текстов
- Проверка орфографии на русском, казахском и английском языках
- Рецензирование по академическим стандартам

ФОРМАТ ОТВЕТА:
- ВСЕГДА отвечай ТОЛЬКО валидным JSON
- НИКОГДА не добавляй текст до или после JSON
- При неуверенности используй поле "confidence"
```

### 5.3 Детальный анализ промптов

#### Промпт классификации (detectArticleSection)

**Текущие проблемы:**
1. Слишком много текста в промпте (~600 токенов)
2. Примеры занимают место, но их мало
3. Нет негативных примеров

**Рекомендованная структура (Chain-of-Thought):**
```
## ЗАДАЧА
Определи раздел журнала для научной статьи.

## РАЗДЕЛЫ (выбери ОДИН):
1. ТЕХНИЧЕСКИЕ НАУКИ — IT, инженерия, программирование, строительство
2. ПЕДАГОГИЧЕСКИЕ НАУКИ — образование, методика преподавания, дидактика
3. ЕСТЕСТВЕННЫЕ И ЭКОНОМИЧЕСКИЕ НАУКИ — физика, химия, биология, экономика

## АЛГОРИТМ КЛАССИФИКАЦИИ:
1. Найди КЛЮЧЕВЫЕ ТЕРМИНЫ в тексте
2. Определи МЕТОДОЛОГИЮ исследования
3. Определи ОБЪЕКТ исследования
4. Выбери раздел по МЕТОДОЛОГИИ, не по объекту

## ВАЖНЫЕ ПРАВИЛА:
- "Методика преподавания X" → ПЕДАГОГИЧЕСКИЕ НАУКИ (даже если X = IT)
- "Разработка программного обеспечения" → ТЕХНИЧЕСКИЕ НАУКИ
- Confidence < 0.5 → требует ручной проверки

## НАЗВАНИЕ: "${title}"
## ТЕКСТ (начало):
${content.substring(0, 2000)}

## ОТВЕТ (JSON):
{"section": "...", "confidence": 0.0-1.0, "reasoning": "1-2 предложения"}
```

#### Промпт проверки орфографии (checkSpelling)

**Текущие проблемы:**
1. AI возвращает false positives (word = suggestion)
2. Игнорирование терминов работает нестабильно
3. Нет примеров для казахского языка

**Улучшенная версия:**
```
## ЗАДАЧА
Найди ТОЛЬКО реальные орфографические ОШИБКИ в тексте.

## ПРАВИЛА:
1. word и suggestion ДОЛЖНЫ быть РАЗНЫМИ словами
2. НЕ отмечай правильно написанные слова
3. ИГНОРИРУЙ:
   - Термины: DNA, РНК, IT, API, SQL
   - Имена и названия: Иванов, Казахстан, Google
   - Аббревиатуры: ЖКХ, ВУЗ, НИИ
   - Казахские слова если корректны: қазақ, ұлт, әдіс

## ПРИМЕРЫ ОШИБОК:
✅ {"word": "эксперемент", "suggestion": "эксперимент"} — ПРАВИЛЬНО
✅ {"word": "обьект", "suggestion": "объект"} — ПРАВИЛЬНО
❌ {"word": "многогранного", "suggestion": "многогранного"} — НЕПРАВИЛЬНО (одинаковые!)

## ФОРМАТ:
{
  "errors": [
    {"word": "...", "suggestion": "...", "context": "...слово..."}
  ],
  "totalErrors": N
}

Если ошибок нет: {"errors": [], "totalErrors": 0}

## ТЕКСТ:
${content.substring(0, 3500)}
```

### 5.4 Техники промпт-инженеринга

| Техника | Использование | Рекомендация |
|---------|---------------|--------------|
| **Role prompting** | ✅ Используется | Усилить expertise |
| **Few-shot examples** | ⚠️ Минимально | Добавить 3-5 примеров |
| **Chain-of-Thought** | ❌ Не используется | Добавить для классификации |
| **Negative examples** | ❌ Не используется | Добавить "НЕ делай так" |
| **Output formatting** | ✅ Хорошо | JSON структура чёткая |
| **Constraint definition** | ⚠️ Частично | Усилить границы |

### 5.5 Рекомендации Prompt Engineer

**1. Structured Output с JSON Schema:**
```javascript
// Добавить в запрос OpenRouter
{
  "response_format": {
    "type": "json_schema",
    "json_schema": {
      "name": "section_classification",
      "schema": {
        "type": "object",
        "properties": {
          "section": {"type": "string", "enum": ["ТЕХНИЧЕСКИЕ НАУКИ", "ПЕДАГОГИЧЕСКИЕ НАУКИ", "ЕСТЕСТВЕННЫЕ И ЭКОНОМИЧЕСКИЕ НАУКИ"]},
          "confidence": {"type": "number", "minimum": 0, "maximum": 1},
          "reasoning": {"type": "string"}
        },
        "required": ["section", "confidence"]
      }
    }
  }
}
```

**2. Prompt Templates:**
```javascript
// src/prompts/templates.js
export const PROMPTS = {
  METADATA: ({ fileName, content }) => `...`,
  SECTION: ({ title, content }) => `...`,
  SPELLING: ({ content }) => `...`,
  REVIEW: ({ fileName, content }) => `...`
};

// Легко тестировать и версионировать
```

**3. A/B тестирование промптов:**
```javascript
const selectPromptVariant = (taskType) => {
  const variants = {
    section: [SECTION_PROMPT_V1, SECTION_PROMPT_V2],
  };
  // Рандомный выбор + логирование результатов
  return variants[taskType][Math.random() > 0.5 ? 0 : 1];
};
```

**4. Prompt Compression:**
```javascript
// Сжатие контента перед отправкой
const compressContent = (text) => {
  return text
    .replace(/\s+/g, ' ')           // Убрать лишние пробелы
    .replace(/[^\w\sа-яёәғқңөұүһі.,!?-]/gi, '') // Убрать спецсимволы
    .substring(0, 2000);             // Ограничить длину
};
```

---

## 6. Сводная таблица рекомендаций

| Приоритет | Область | Рекомендация | Сложность | Влияние |
|-----------|---------|--------------|-----------|---------|
| 🔴 P0 | Security | Перенести API ключ на backend | Средняя | Критическое |
| 🔴 P0 | Testing | Добавить unit тесты (Jest) | Средняя | Высокое |
| 🟠 P1 | Code | Рефакторинг App.jsx → hooks | Средняя | Среднее |
| 🟠 P1 | AI | Кэширование AI результатов | Низкая | Среднее |
| 🟠 P1 | UX | Confirm dialog при удалении | Низкая | Среднее |
| 🟡 P2 | Code | Миграция на TypeScript | Высокая | Среднее |
| 🟡 P2 | AI | Мульти-модельная стратегия | Средняя | Среднее |
| 🟡 P2 | Prompts | Structured outputs | Низкая | Среднее |
| 🟢 P3 | UX | Dark mode | Низкая | Низкое |
| 🟢 P3 | AI | Поддержка Ollama | Средняя | Низкое |

---

## 7. Roadmap развития

### Фаза 1: Стабилизация (1-2 недели)
- [ ] Перенести API ключ на backend (proxy)
- [ ] Добавить базовые unit тесты (>50% coverage)
- [ ] Исправить A11y проблемы (aria-labels, focus trap)
- [ ] Добавить confirm dialog при удалении

### Фаза 2: Оптимизация (2-4 недели)
- [ ] Рефакторинг App.jsx → custom hooks
- [ ] Разделить aiApi.js на модули
- [ ] Добавить кэширование AI результатов
- [ ] Улучшить промпты (Chain-of-Thought)

### Фаза 3: Масштабирование (1-2 месяца)
- [ ] Миграция на TypeScript
- [ ] Аутентификация пользователей
- [ ] Облачное хранение (Supabase/Firebase)
- [ ] Мониторинг токенов и метрик

### Фаза 4: Расширение (2-3 месяца)
- [ ] Мультиязычный интерфейс (EN/RU/KZ)
- [ ] Поддержка локальных моделей (Ollama)
- [ ] Совместная работа (real-time)
- [ ] API для интеграции

---

## Заключение

**AI-Redactor** — функционально завершённый MVP с хорошей архитектурой и продуманным UX, развёрнутый в production на [airesume.zhezu.kz](https://airesume.zhezu.kz) (Жезказганский университет им. О.А. Байконурова). Основные риски связаны с безопасностью (API ключ на клиенте) и отсутствием тестов.

**Сильные стороны:**
- Полный цикл обработки статей (загрузка → AI → PDF)
- Умная система fallback для AI
- Хорошая обработка ошибок
- Интуитивный интерфейс

**Области для улучшения:**
- Безопасность (proxy API ключа)
- Качество кода (тесты, TypeScript)
- AI оптимизация (кэширование, мульти-модели)
- Доступность (WCAG 2.1)

**Итоговая оценка готовности к production:** 7/10

**Production URL:** [https://airesume.zhezu.kz](https://airesume.zhezu.kz) — субдомен Жезказганского университета им. О.А. Байконурова

---

*Документ подготовлен: 22 декабря 2025*
*Версия: 1.0*
